from django.shortcuts import render
from django.core.files.storage import FileSystemStorage
from django.http import JsonResponse

def upload_files(request):
    if request.method == 'POST' and 'sourcefile' in request.FILES and 'targetfile' in request.FILES:
        sourcefile = request.FILES['sourcefile']
        targetfile = request.FILES['targetfile']
        
        fs_source = FileSystemStorage(location='Accounts/data/input_data/source')
        fs_target = FileSystemStorage(location='Accounts/data/input_data/target')

        fs_source.save(sourcefile.name, sourcefile)
        fs_target.save(targetfile.name, targetfile)
        
        return JsonResponse({'message': 'Files uploaded successfully!'})

    return JsonResponse({'message': 'Failed to upload files.'})


from django.urls import path
from . import views

urlpatterns = [
    path('upload/', views.upload_files, name='upload_files'),
]


from django.contrib import admin
from django.urls import include, path

urlpatterns = [
    path('admin/', admin.site.urls),
    path('accounts/', include('Accounts.urls')),
]
