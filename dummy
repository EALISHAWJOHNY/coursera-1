from django.shortcuts import render
from django.core.files.storage import FileSystemStorage
import os
from django.conf import settings

def accounts(request):
    url1 = None
    url2 = None
    
    # Define the specific folders
    folder1 = 'uploads/accounts/file1/'
    folder2 = 'uploads/accounts/file2/'

    # Ensure both folders exist
    if not os.path.exists(os.path.join(settings.MEDIA_ROOT, folder1)):
        os.makedirs(os.path.join(settings.MEDIA_ROOT, folder1))
        
    if not os.path.exists(os.path.join(settings.MEDIA_ROOT, folder2)):
        os.makedirs(os.path.join(settings.MEDIA_ROOT, folder2))

    if request.method == 'POST':
        # Save the first file in folder1
        if 'file1' in request.FILES:
            file1 = request.FILES['file1']
            fs1 = FileSystemStorage(location=os.path.join(settings.MEDIA_ROOT, folder1))
            name1 = fs1.save(file1.name, file1)
            url1 = fs1.url(name1)

        # Save the second file in folder2
        if 'file2' in request.FILES:
            file2 = request.FILES['file2']
            fs2 = FileSystemStorage(location=os.path.join(settings.MEDIA_ROOT, folder2))
            name2 = fs2.save(file2.name, file2)
            url2 = fs2.url(name2)

    return render(request, 'myapp/accounts.html', {
        'url1': url1,
        'url2': url2
    })
